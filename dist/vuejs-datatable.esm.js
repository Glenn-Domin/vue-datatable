import{get,set}from"object-path";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}var script={props:{column:[Object,Array],row:[Object,Array]},computed:{content:function(){return this.column.getRepresentation(this.row)}}};function normalizeComponent(t,e,s,n,i,a,r,o,l,_){"boolean"!=typeof r&&(l=o,o=r,r=!1);var u,c="function"==typeof s?s.options:s;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),n&&(c._scopeId=n),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):e&&(u=r?function(){e.call(this,_(this.$root.$options.shadowRoot))}:function(t){e.call(this,o(t))}),u)if(c.functional){var d=c.render;c.render=function(t,e){return u.call(e),d(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return s}var normalizeComponent_1=normalizeComponent;const __vue_script__=script;script.__file="vue-datatable-cell.vue";var __vue_render__=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{style:{"text-align":t.column.align}},[t.column.component?s(t.column.component,{tag:"component",attrs:{row:t.row,column:t.column}}):t.column.interpolate?s("span",{domProps:{innerHTML:t._s(t.content)}}):s("span",[t._v(t._s(t.content))])],1)},__vue_staticRenderFns__=[];const __vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1;var VueDatatableCell=normalizeComponent_1({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},void 0,__vue_script__,void 0,!1,void 0,void 0,void 0),script$1={props:{model:{prop:"direction",event:"change"},column:[Object,Array],settings:Object,direction:{type:String,default:null}},computed:{canSort:function(){return this.column.sortable},is_sorted_ascending:function(){return"asc"===this.direction},is_sorted_descending:function(){return"desc"===this.direction},is_sorted:function(){return this.is_sorted_descending||this.is_sorted_ascending},classes:function(){var t=this.settings.get("table.sorting.classes"),e=t.canSort;return this.canSort?this.is_sorted?(this.is_sorted_ascending&&(e=e.concat(t.sortAsc)),this.is_sorted_descending&&(e=e.concat(t.sortDesc)),this.joinClasses(e)):(e=e.concat(t.sortNone),this.joinClasses(e)):""}},methods:{joinClasses:function(t){return this.unique(t).join(" ")},toggleSort:function(t){t&&(this.direction&&null!==this.direction?"asc"===this.direction?this.$emit("change","desc",this.column):this.$emit("change",null,this.column):this.$emit("change","asc",this.column))},unique:function(t){var e={};return t.filter(function(t){return!e.hasOwnProperty(t)&&(e[t]=!0)})}}};const __vue_script__$1=script$1;script$1.__file="vue-datatable-header.vue";var __vue_render__$1=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{class:[t.column.headerClass,t.column.sortable?"sortable":""],style:{"text-align":t.column.align},on:{click:function(e){t.toggleSort(t.column.sortable)}}},[t.column.headerComponent?s(t.column.headerComponent,{tag:"component",attrs:{column:t.column}}):s("span",[t._v(t._s(t.column.label))]),t._v(" "),t.column.sortable?s("span",{class:t.classes}):t._e()],1)},__vue_staticRenderFns__$1=[];const __vue_inject_styles__$1=void 0,__vue_scope_id__$1=void 0,__vue_module_identifier__$1=void 0,__vue_is_functional_template__$1=!1;var VueDatatableHeader=normalizeComponent_1({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},void 0,__vue_script__$1,void 0,!1,void 0,void 0,void 0),Settings=function(){function t(){_classCallCheck(this,t),this.properties={table:{class:"table table-hover table-striped table-bordered",row:{classes:[""]},sorting:{classes:{canSort:["sort"],sortNone:[""],sortAsc:["sort-asc"],sortDesc:["sort-desc"]}}},pager:{classes:{pager:["pagination","mb-0"],li:"page-item",a:"page-link",selected:"active",disabled:"disabled"},icons:{previous:"&lt;",next:"&gt;"}}}}return _createClass(t,[{key:"get",value:function(t){return get(this.properties,t)}},{key:"set",value:function(t,e){return set(this.properties,t,e),this}},{key:"merge",value:function(t){return this.properties=this._mergeObjects(this.properties,t),this}},{key:"_mergeObjects",value:function(t,e){for(var s in e)null!==e[s]?"object"!==_typeof(e[s])?t[s]=e[s]:t[s]=this._mergeObjects(t[s],e[s]):t[s]=e[s];return t}}]),t}(),script$2={props:{disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},value:{type:Number,default:null},prevNext:{type:Boolean,default:!1}},computed:{li_classes:function(){var t=[];return this.settings.get("pager.classes.li")&&t.push(this.settings.get("pager.classes.li")),this.disabled&&t.push(this.settings.get("pager.classes.disabled")),this.selected&&t.push(this.settings.get("pager.classes.selected")),t.join(" ")},a_classes:function(){var t=[];return this.settings.get("pager.classes.a")&&t.push(this.settings.get("pager.classes.a")),t.join(" ")},settings:function(){return this.$parent.settings}},methods:{sendClick:function(){this.disabled||this.$emit("click",this.value)}}};const __vue_script__$2=script$2;script$2.__file="vue-datatable-pager-button.vue";var __vue_render__$2=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{class:t.li_classes},[s("a",{class:[t.a_classes,!0===t.prevNext?"px-3 px-md-4":""],attrs:{href:"javascript: void(0);"},on:{click:t.sendClick}},[t._t("default",[t._v(t._s(t.value))])],2)])},__vue_staticRenderFns__$2=[];const __vue_inject_styles__$2=void 0,__vue_scope_id__$2=void 0,__vue_module_identifier__$2=void 0,__vue_is_functional_template__$2=!1;var VueDatatablePagerButton=normalizeComponent_1({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},void 0,__vue_script__$2,void 0,!1,void 0,void 0,void 0),Column=function(){function t(e){_classCallCheck(this,t),this.setAlignment(e.align),this.label=e.label||"",this.field=e.field||null,this.representedAs=e.representedAs||null,this.component=e.component||null,this.interpolate=e.interpolate||!1,this.headerComponent=e.headerComponent||null,this.sortable=this.isSortable(e),this.filterable=this.isFilterable(e),this.headerClass=e.headerClass||""}return _createClass(t,[{key:"setAlignment",value:function(t){return t&&"string"==typeof t?"center"===t.toLowerCase()?(this.align="center",this):"right"===t.toLowerCase()?(this.align="right",this):(this.align="left",this):(this.align="left",this)}},{key:"isFilterable",value:function(t){return!1!==t.filterable&&(!(!t.field&&!t.representedAs)&&!(this.component&&!this.representedAs&&!this.field))}},{key:"isSortable",value:function(t){return!1!==t.sortable&&(!(!t.field&&!t.representedAs)&&!(this.component&&!this.representedAs&&!this.field))}},{key:"getRepresentation",value:function(t){return this.representedAs&&"function"==typeof this.representedAs?this.representedAs(t):this.component&&this.filterable?this.plain_text_function(t,this):get(t,this.field)}},{key:"getValue",value:function(t){return this.getRepresentation(t)}},{key:"matches",value:function(t,e){return-1!==(""+this.getRepresentation(t)).toLowerCase().indexOf(e.toLowerCase())}}]),t}(),script$3={props:{name:{type:String,default:"default"},columns:[Object,Array],data:[Object,Array,String,Function],filterBy:{type:[String,Array],default:null},rowClasses:{type:[String,Array,Object,Function],default:null}},data:function(){return{sort_by:null,sort_dir:null,total_rows:0,page:1,per_page:null,processed_rows:[],selected_rows:[]}},computed:{rows:function(){return this.data.slice(0)},settings:function(){return this.$options.settings},handler:function(){return this.$options.handler},normalized_columns:function(){return this.columns.map(function(t){return new Column(t)})},table_class:function(){return this.settings.get("table.class")}},methods:{getSortDirectionForColumn:function(t){return this.sort_by!==t?null:this.sort_dir},setSortDirectionForColumn:function(t,e){this.sort_by=e,this.sort_dir=t},processRows:function(){if("function"!=typeof this.data){var t=this.handler.filterHandler(this.rows,this.filterBy,this.normalized_columns),e=this.handler.sortHandler(t,this.sort_by,this.sort_dir),s=this.handler.paginateHandler(e,this.per_page,this.page);this.handler.displayHandler(s,{filtered_data:t,sorted_data:e,paged_data:s},this.setRows,this.setTotalRowCount)}else{var n={filter:this.filterBy,sort_by:this.sort_by?this.sort_by.field:null,sort_dir:this.sort_dir,page_length:this.per_page,page_number:this.page};this.data(n,function(t,e){this.setRows(t),this.setTotalRowCount(e)}.bind(this))}},setRows:function(t){this.processed_rows=t},setTotalRowCount:function(t){this.total_rows=t},getRowClasses:function(t){var e=this.rowClasses;return null===e&&(e=this.settings.get("table.row.classes")),"function"==typeof e?e(t):e}},created:function(){this.$datatables[this.name]=this,this.$root.$emit("table.ready",this.name),this.$watch(function(){return this.data}.bind(this),this.processRows,{deep:!0}),this.$watch("columns",this.processRows),this.$watch(function(){return this.filterBy+this.per_page+this.page+this.sort_by+this.sort_dir}.bind(this),this.processRows),this.processRows()},handler:null,settings:null};const __vue_script__$3=script$3;script$3.__file="vue-datatable.vue";var __vue_render__$3=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{class:t.table_class},[s("thead",[s("tr",t._l(t.normalized_columns,function(e,n){return s("datatable-header",{key:n,attrs:{column:e,settings:t.settings,direction:t.getSortDirectionForColumn(e)},on:{change:t.setSortDirectionForColumn}})}),1)]),t._v(" "),s("tbody",[t._l(t.processed_rows,function(e,n){return t._t("default",[s("tr",{key:n,class:t.getRowClasses(e)},t._l(t.normalized_columns,function(t,n){return s("datatable-cell",{key:n,attrs:{column:t,row:e}})}),1)],{row:e,columns:t.normalized_columns})}),t._v(" "),0==t.processed_rows.length?s("tr",[s("td",{attrs:{colspan:t.normalized_columns.length}},[t._t("no-results")],2)]):t._e()],2),t._v(" "),t.$slots.footer||t.$scopedSlots.footer?s("tfoot",[t._t("footer",null,{rows:t.processed_rows})],2):t._e()])},__vue_staticRenderFns__$3=[];const __vue_inject_styles__$3=void 0,__vue_scope_id__$3=void 0,__vue_module_identifier__$3=void 0,__vue_is_functional_template__$3=!1;var VueDatatable=normalizeComponent_1({render:__vue_render__$3,staticRenderFns:__vue_staticRenderFns__$3},void 0,__vue_script__$3,void 0,!1,void 0,void 0,void 0),script$4={model:{prop:"page",event:"change"},props:{table:{type:String,default:"default"},type:{type:String,default:"long"},perPage:{type:Number,default:10},page:{type:Number,default:1}},data:function(){return{table_instance:null}},computed:{show:function(){return this.table_instance&&this.total_rows>0},total_rows:function(){return this.table_instance?this.table_instance.total_rows:0},pagination_class:function(){return this.settings.get("pager.classes.pager")},disabled_class:function(){return this.settings.get("pager.classes.disabled")},previous_link_classes:function(){return this.page-1<1?this.settings.get("pager.classes.disabled"):""},next_link_classes:function(){return this.page+1>this.total_pages?this.settings.get("pager.classes.disabled"):""},total_pages:function(){return this.total_rows>0?Math.ceil(this.total_rows/this.perPage):0},previous_icon:function(){return this.settings.get("pager.icons.previous")},next_icon:function(){return this.settings.get("pager.icons.next")},settings:function(){return this.$options.settings}},methods:{setPageNum:function(t){this.table_instance.page=t,this.table_instance.per_page=this.perPage,this.$emit("change",t)},getClassForPage:function(t){return this.page==t?this.settings.get("pager.classes.selected"):""}},watch:{total_rows:function(){this.page>this.total_pages&&this.setPageNum(this.total_pages)},perPage:function(){var t=this.page;t>this.total_pages&&(t=this.total_pages),this.setPageNum(t)}},created:function(){if(this.$datatables[this.table])return this.table_instance=this.$datatables[this.table],void(this.table_instance.per_page=this.perPage);this.$root.$on("table.ready",function(t){t===this.table&&(this.table_instance=this.$datatables[this.table],this.table_instance.per_page=this.perPage)}.bind(this))},settings:null};const __vue_script__$4=script$4;script$4.__file="vue-datatable-pager.vue";var __vue_render__$4=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("nav",{staticClass:"d-flex align-items-center mb-2"},["abbreviated"===t.type?s("ul",{class:t.pagination_class},[s("datatable-button",{attrs:{disabled:t.page-1<1,value:t.page-1,prevNext:!0},on:{click:t.setPageNum}}),t._v(" "),t.page-3>=1?s("datatable-button",{attrs:{value:1},on:{click:t.setPageNum}}):t._e(),t._v(" "),t.page-4>=1?s("datatable-button",{attrs:{disabled:""}},[t._v("...")]):t._e(),t._v(" "),t.page-2>=1?s("datatable-button",{attrs:{value:t.page-2},on:{click:t.setPageNum}}):t._e(),t._v(" "),t.page-1>=1?s("datatable-button",{attrs:{value:t.page-1},on:{click:t.setPageNum}}):t._e(),t._v(" "),s("datatable-button",{attrs:{value:t.page,selected:""}}),t._v(" "),t.page+1<=t.total_pages?s("datatable-button",{attrs:{value:t.page+1},on:{click:t.setPageNum}}):t._e(),t._v(" "),t.page+2<=t.total_pages?s("datatable-button",{attrs:{value:t.page+2},on:{click:t.setPageNum}}):t._e(),t._v(" "),t.page+4<=t.total_pages?s("datatable-button",{attrs:{disabled:""}},[t._v("...")]):t._e(),t._v(" "),t.page+3<=t.total_pages?s("datatable-button",{attrs:{value:t.total_pages},on:{click:t.setPageNum}}):t._e(),t._v(" "),s("datatable-button",{attrs:{disabled:t.page+1>t.total_pages,value:t.page+1,prevNext:!0},on:{click:t.setPageNum}})],1):"long"===t.type?s("ul",{class:t.pagination_class},t._l(t.total_pages,function(e){return s("datatable-button",{key:e,attrs:{value:e,selected:e===t.page},on:{click:t.setPageNum}})}),1):"short"===t.type?s("ul",{class:t.pagination_class},[s("datatable-button",{attrs:{value:t.page,selected:""}})],1):t._e()]):t._e()},__vue_staticRenderFns__$4=[];const __vue_inject_styles__$4=void 0,__vue_scope_id__$4=void 0,__vue_module_identifier__$4=void 0,__vue_is_functional_template__$4=!1;var VueDatatablePager=normalizeComponent_1({render:__vue_render__$4,staticRenderFns:__vue_staticRenderFns__$4},void 0,__vue_script__$4,void 0,!1,void 0,void 0,void 0),Handler=function(){function t(){_classCallCheck(this,t),this.filterHandler=this.handleFilter,this.sortHandler=this.handleSort,this.paginateHandler=this.handlePaginate,this.displayHandler=this.handleDisplay}return _createClass(t,[{key:"handleFilter",value:function(t,e,s){return e?(Array.isArray(e)||(e=[e]),t.filter(function(t){for(var n in e){var i=e[n].split(/\s/),a=!0;for(var r in i)this.rowMatches(t,i[r],s)||(a=!1);if(a)return!0}return!1}.bind(this))):t}},{key:"rowMatches",value:function(t,e,s){for(var n in s)if(s[n].matches(t,e))return!0;return!1}},{key:"handleSort",value:function(t,e,s){return e&&null!==s?t.sort(function(t,n){var i=e.getRepresentation(t),a=e.getRepresentation(n);if(i==a)return 0;var r=i>a?1:-1;return"desc"===s&&(r*=-1),r}):t}},{key:"handlePaginate",value:function(t,e,s){if(!e)return t;s<1&&(s=1);var n=(s-1)*e,i=s*e;return t.slice(n,i)}},{key:"handleDisplay",value:function(t,e,s,n){s(t),n(e.filtered_data.length)}}]),t}(),TableType=function(){function t(e){_classCallCheck(this,t),this.id=e,this.handler=new Handler,this.settings=new Settings}return _createClass(t,[{key:"getId",value:function(){return this.id}},{key:"setFilterHandler",value:function(t){return this.handler.filterHandler=t,this}},{key:"setSortHandler",value:function(t){return this.handler.sortHandler=t,this}},{key:"setPaginateHandler",value:function(t){return this.handler.paginateHandler=t,this}},{key:"setDisplayHandler",value:function(t){return this.handler.displayHandler=t,this}},{key:"setting",value:function(t,e){return void 0===e?this.settings.get(t):(this.settings.set(t,e),this)}},{key:"mergeSettings",value:function(t){return this.settings.merge(t),this}},{key:"getTableDefinition",value:function(){var t=this.clone(VueDatatable);return t.handler=this.handler,t.settings=this.settings,t.name=this.id,t}},{key:"getPagerDefinition",value:function(){var t=this.clone(VueDatatablePager);return t.settings=this.settings,t.name=this.id,t}},{key:"clone",value:function(t){var e;if(null===t||"object"!==_typeof(t))return t;if(t instanceof Array){e=[];for(var s=0;s<t.length;s++)e[s]=this.clone(t[s]);return e}if(t instanceof Object){for(var n in e={},t)t.hasOwnProperty(n)&&(e[n]=this.clone(t[n]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")}}]),t}(),DatatableFactory=function(){function t(){_classCallCheck(this,t),this.table_types=[],this.use_default_type=!0,this.default_table_settings=new Settings}return _createClass(t,[{key:"useDefaultType",value:function(t){return this.use_default_type=!!t,this}},{key:"registerTableType",value:function(t,e){var s=new TableType(t);return this.table_types.push(s),e&&"function"==typeof e&&e(s),this}},{key:"install",value:function(t){for(var e in t.prototype.$datatables={},t.component("datatable-cell",VueDatatableCell),t.component("datatable-header",VueDatatableHeader),t.component("datatable-button",VueDatatablePagerButton),this.use_default_type&&this.registerTableType("datatable",function(t){t.mergeSettings(this.default_table_settings.properties)}.bind(this)),this.table_types)this.installTableType(this.table_types[e].getId(),this.table_types[e],t)}},{key:"installTableType",value:function(t,e,s){s.component(t,e.getTableDefinition()),s.component(t+"-pager",e.getPagerDefinition())}}]),t}(),index=new DatatableFactory;export default index;
//# sourceMappingURL=vuejs-datatable.esm.js.map
